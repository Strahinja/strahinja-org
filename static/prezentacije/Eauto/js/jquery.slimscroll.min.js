(function(k){jQuery.fn.extend({slimScroll:function(f){var r={detectOverElement:void 0,detectOutElement:void 0,width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:0.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:0.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,showSpeed:"fast",hideSpeed:"fast",overrideBarTop:0},
a=k.extend(r,f);this.each(function(){function q(c){c=c||window.event;if(!z())return c.returnValue=!0,c.returnValue;var d=0;c.wheelDelta&&(d=-c.wheelDelta/120);c.detail&&(d=c.detail/3);k(c.target||c.srcTarget).closest("."+a.wrapperClass).is(b.parent())&&m(d,!0);c.preventDefault&&!t&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation());t||(c.returnValue=!1);return c.returnValue}function m(c,e,k){d=b.parent().find("."+a.barClass);var g=c,f=parseInt(a.overrideBarTop),h=b.height()-(d.outerHeight()+
f);e&&(g=parseInt(d.css("top"))+c*parseInt(a.wheelStep)/100*d.outerHeight(),g=Math.min(Math.max(g,0),h),g=0<c?Math.ceil(g):Math.floor(g),d.css({top:g+"px"}));l=parseInt(d.css("top"))/(b.height()-parseInt(b.css("padding-top"))-(d.outerHeight()+f));g=l*(b[0].scrollHeight-b.outerHeight());k&&(g=c,c=g/b[0].scrollHeight*b.outerHeight(),c=Math.min(Math.max(c,0),h),d.css({top:c+"px"}));b.scrollTop(g);b.trigger("slimscrolling",~~g);u();s()}function E(){window.addEventListener?(this.removeEventListener("DOMMouseScroll",
q,!1),this.removeEventListener("mousewheel",q,!1),this.addEventListener("DOMMouseScroll",q,!1),this.addEventListener("mousewheel",q,!1)):(document.detachEvent("onmousewheel",q),document.attachEvent("onmousewheel",q))}function w(){var c=parseInt(a.overrideBarTop);v=Math.max(b.outerHeight()/b[0].scrollHeight*b.outerHeight(),F)-c;d.css({height:v+"px"});c=v==b.outerHeight()-c?"none":"block";d.css({display:c})}function z(){"undefined"===typeof e&&(e=b.data("isOverPanel"));return e}function u(){var c=parseInt(a.overrideBarTop);
w();clearTimeout(A);if(l==~~l||1<l)t=a.allowPageScroll,B!=l&&b.trigger("slimscroll",0==~~l?"top":"bottom");B=l;v+c>=b.outerHeight()?t=!0:(d.stop(!0,!0).fadeIn(a.showSpeed),a.railVisible&&n.stop(!0,!0).fadeIn(a.showSpeed))}function s(){var c=z();a.alwaysVisible||(A=setTimeout(function(){a.disableFadeOut&&c||c||x||y||(d.fadeOut(a.hideSpeed),n.fadeOut(a.hideSpeed))},10))}var e,x,y,A,C,v,l,B,F=30,t=!1,b=k(this);if(b.parent().hasClass(a.wrapperClass)){var h=b.scrollTop(),d=b.parent().find("."+a.barClass),
n=b.parent().find("."+a.railClass);w();var p=!1;if(k.isPlainObject(f)){"hideBar"in f&&f.hideBar&&(p=!0);"forceOverPanel"in f&&f.forceOverPanel&&(e=!0,b.data("isOverPanel",e));if("scrollTo"in f)h=parseInt(a.scrollTo);else if("scrollBy"in f)h+=parseInt(a.scrollBy);else if("destroy"in f){d.remove();n.remove();b.unwrap();return}m(h,!1,!0)}}else{a.height="auto"==a.height?b.parent().innerHeight():a.height;a.top=0;h=k("<div></div>").addClass(a.wrapperClass).css({position:"relative",overflow:"hidden",width:a.width,
height:a.height});b.css({overflow:"hidden",width:a.width,height:a.height});var n=k("<div></div>").addClass(a.railClass).css({width:a.size,height:"100%",position:"absolute",top:a.top,display:a.alwaysVisible&&a.railVisible?"block":"none","border-radius":a.size,background:a.railColor,opacity:a.railOpacity,zIndex:90}),d=k("<div></div>").addClass(a.barClass).css({background:a.color,width:a.size,position:"absolute",top:a.top,opacity:a.opacity,display:a.alwaysVisible?"block":"none","border-radius":a.size,
BorderRadius:a.size,MozBorderRadius:a.size,WebkitBorderRadius:a.size,zIndex:99}),D="right"==a.position?{right:a.distance}:{left:a.distance};n.css(D);d.css(D);b.wrap(h);b.parent().append(d);b.parent().append(n);a.railDraggable&&(d.draggable({axis:"y",containment:"parent",start:function(){y=!0},stop:function(){y=!1;s()},drag:function(a){m(0,k(this).position().top,!1)}}),d.css({"margin-top":a.overrideBarTop}));p&&s();n.hover(function(){u()},function(){s()});d.hover(function(){x=!0},function(){x=!1});
p="undefined"!==typeof r.detectOverElement?b.find(r.detectOverElement):b;h="undefined"!==typeof r.detectOutElement?b.find(r.detectOutElement):b;p.off("mouseenter");p.on("mouseenter",function(){e=!0;b.data("isOverPanel",e);u()});p.off("mousemove");p.on("mousemove",function(){e=!0;b.data("isOverPanel",e);u()});h.off("mouseleave");h.on("mouseleave",function(){e=!1;b.data("isOverPanel",e);s()});b.bind("touchstart",function(a,b){a.originalEvent.touches.length&&(C=a.originalEvent.touches[0].pageY)});b.bind("touchmove",
function(b){b.originalEvent.preventDefault();b.originalEvent.touches.length&&m((C-b.originalEvent.touches[0].pageY)/a.touchScrollStep,!0)});"bottom"===a.start?(d.css({top:b.outerHeight()-d.outerHeight()}),m(0,!0)):"top"!==a.start&&(m(k(a.start).position().top,null,!0),a.alwaysVisible||d.hide());E();w();b.bind("scrollContent",function(a,b){m(b,!0,!1)})}});return this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);
